{% extends "layout.html" %}

{% load static %}

{% block main %}
    <section class="container">
        <h2>All your challenges</h2>
        {% if challenges %}
            {% for challenge in challenges %}
                <ul class="col-xs-6 col-xs-offset-3">
                    <li class="row">
                        <a href="{% url 'challenge-edit' challenge.id %}"><h3>{{ challenge.challenge_name }}</h3></a>                 
                        <ul>
                            <li><p>Fears: My challenge fears are {{ challenge.challenge_fears }}<p></li>
                            <li><p>Goals: My challenge goals are {{ challenge.challenge_goals }}<p></li>
                            <li><p>Compulsions: My challenge compulsions are {{ challenge.challenge_compulsions }}<p></li>
                        </ul>
                        <a class="btn btn-primary pull-left col-xs-2 col-xs-offset-1" href="{% url 'challenge-archive' challenge.id %}" onclick="return checkArchive()";>Archive</a>
                        <a class="btn btn-primary pull-right col-xs-3" href="{% url 'challenge-score-form' challenge.id %}"> Do the challenge </a>
                    </li>
                </ul>
            {% endfor %}
        {% else %}
            <h2>You have no challenges yet!</h2>
        {% endif %}
        <a class="btn btn-primary pull-left col-xs-2 col-xs-offset-5" href="{% url 'challenge-add' %}">
            <span class="fa fa-plus-square"></span> Add New Challenge
        </a>
    </section>
    
    <script language="javascript">
        function checkArchive() {
            if (confirm("Are you sure you want to archive this challenge? Once archived you will not be able to reactivate it.")) {
                return true;
            } else {
                return false;
            }
        }
    </script>
{% endblock %}